Microsoft (R) Macro Assembler Version 6.11		    10/04/23 16:49:18
src\st2Prac.asm						     Page 1 - 1


				;	Author:     221003350 Ariel Sischy
				;	Computer Science 3B - P0X
				.386
				.MODEL FLAT ; Flat memory model
				.STACK 4096 ; 4096 bytes

				INCLUDE io.inc ; Directive to use the IO Library
			      C ;
			      C ; Simple I/O Routines - Version 2
			      C ;
			      C 
			      C IFNDEF IO_INC
 = 1			      C IO_INC equ <1>
			      C 
			      C OutputStr PROTO NEAR32 STDCALL :DWORD
			      C OutputInt PROTO NEAR32 STDCALL :DWORD
			      C OutputFloat PROTO NEAR32 STDCALL :DWORD
			      C OutputFloat8 PROTO NEAR32 STDCALL :QWORD
			      C InputInt PROTO NEAR32 STDCALL
			      C InputStr PROTO NEAR32 STDCALL :DWORD, :DWORD
			      C 
			      C ELSE
			      C ENDIF
			      C 

				; Exit function
				ExitProcess PROTO NEAR32 stdcall, dwExitCode:DWORD

				; The data section stores all global variables
 00000000			.DATA

 00000000 53 69 7A 65 3A	msg1 BYTE "Size: ",0
	   20 00
 00000007 20 0A 00		msg2 BYTE " ",10,0
 0000000A  00000004 [		array DWORD 4 DUP (2,3,4,5)
	    00000002
	    00000003
	    00000004
	    00000005
	   ]

 00000000			.CODE

 00000000			_calc PROC NEAR32

 00000000  55			PUSH ebp
 00000001  8B EC		MOV ebp, esp
 00000003  83 EC 08		SUB esp, 8
 00000006  53			PUSH ebx
 00000007  51			PUSH ecx
 00000008  52			PUSH edx
 00000009  9C			PUSHFD
				;;;code

 0000000A  8B 5D 0C		MOV ebx, [ebp+12];array pointer
 0000000D  8B 4D 08		MOV ecx, [ebp+8]; size
 00000010  B8 00000000		MOV eax, 0
 00000015  89 45 F8		MOV [ebp-8], eax

 00000018			beginLoop:
 00000018  83 F9 00		CMP ecx, 0
 0000001B  74 2C		JZ endLoop

 0000001D  8B 03		MOV eax, [ebx]
 0000001F  89 45 FC		MOV [ebp-4], eax

 00000022  9B DB E3		FINIT

 00000025  DB 45 FC		FILD DWORD PTR [ebp-4]
 00000028  B8 00000002		MOV eax, 2
 0000002D  89 45 FC		MOV [ebp-4], eax
 00000030  DB 45 FC		FILD DWORD PTR [ebp-4]
 00000033  DE C9		FMUL

 00000035  D9 55 FC		FST REAL4 PTR [ebp-4]

 00000038  D9 45 FC		FLD REAL4 PTR [ebp-4]
 0000003B  D9 45 F8		FLD REAL4 PTR [ebp-8]

 0000003E  DE C1		FADD

 00000040  D9 55 F8		FST REAL4 PTR [ebp-8]



 00000043  83 C3 04		ADD ebx, 4
 00000046  49			DEC ecx
 00000047  EB CF		JMP beginLoop
 00000049			endLoop:

 00000049  8B 45 F8		MOV eax, REAL4 PTR [ebp-8]





				;;;;code
 0000004C  9D			POPFD
 0000004D  5A			POP edx
 0000004E  59			POP ecx
 0000004F  5B			POP ebx

 00000050  8B E5		MOV esp, ebp
 00000052  5D			POP ebp

 00000053  C2 0008		RET 8
 00000056			_calc ENDP




 00000056			_start:
 00000056				
					

					INVOKE OutputStr, ADDR msg1
					INVOKE InputInt
 00000065  8B D8			MOV ebx, eax
 00000067  8D 0D 0000000A R		LEA ecx, array

 0000006D  51				PUSH ecx;+12
 0000006E  53				PUSH ebx;+8

 0000006F  E8 FFFFFF8C			CALL _calc 
					INVOKE OutputFloat, eax

					INVOKE ExitProcess, 0
 00000081			Public _start
				END
Microsoft (R) Macro Assembler Version 6.11		    10/04/23 16:49:18
src\st2Prac.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

FLAT . . . . . . . . . . . . . .	GROUP
STACK  . . . . . . . . . . . . .	32 Bit	 00001000 DWord	  Stack	  'STACK'	 
_DATA  . . . . . . . . . . . . .	32 Bit	 0000004A DWord	  Public  'DATA'	
_TEXT  . . . . . . . . . . . . .	32 Bit	 00000081 DWord	  Public  'CODE'	


Procedures,  parameters and locals:

                N a m e                 Type     Value    Attr

$$$$$$00002  . . . . . . . . . .	P Near	 00000056 _TEXT	Length= 0000002B Private
ExitProcess  . . . . . . . . . .	P Near	 00000000 FLAT	Length= 00000000 External STDCALL
InputInt . . . . . . . . . . . .	P Near	 00000000 FLAT	Length= 00000000 External STDCALL
InputStr . . . . . . . . . . . .	P Near	 00000000 FLAT	Length= 00000000 External STDCALL
OutputFloat8 . . . . . . . . . .	P Near	 00000000 FLAT	Length= 00000000 External STDCALL
OutputFloat  . . . . . . . . . .	P Near	 00000000 FLAT	Length= 00000000 External STDCALL
OutputInt  . . . . . . . . . . .	P Near	 00000000 FLAT	Length= 00000000 External STDCALL
OutputStr  . . . . . . . . . . .	P Near	 00000000 FLAT	Length= 00000000 External STDCALL
_calc  . . . . . . . . . . . . .	P Near	 00000000 _TEXT	Length= 00000056 Public
  beginLoop  . . . . . . . . . .	L Near	 00000018 _TEXT	
  endLoop  . . . . . . . . . . .	L Near	 00000049 _TEXT	


Symbols:

                N a m e                 Type     Value    Attr

@CodeSize  . . . . . . . . . . .	Number	 00000000h   
@DataSize  . . . . . . . . . . .	Number	 00000000h   
@Interface . . . . . . . . . . .	Number	 00000000h   
@Model . . . . . . . . . . . . .	Number	 00000007h   
@code  . . . . . . . . . . . . .	Text   	 _TEXT
@data  . . . . . . . . . . . . .	Text   	 FLAT
@fardata?  . . . . . . . . . . .	Text   	 FLAT
@fardata . . . . . . . . . . . .	Text   	 FLAT
@stack . . . . . . . . . . . . .	Text   	 FLAT
IO_INC . . . . . . . . . . . . .	Text   	 1
_start . . . . . . . . . . . . .	L Near	 00000056 _TEXT	Public
array  . . . . . . . . . . . . .	DWord	 0000000A _DATA	
msg1 . . . . . . . . . . . . . .	Byte	 00000000 _DATA	
msg2 . . . . . . . . . . . . . .	Byte	 00000007 _DATA	

	   0 Warnings
	   0 Errors
